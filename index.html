<!DOCTYPE html>
<html lang="en">

  <head>
    <title>BlockChain::News</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="robots" content="noindex, nofollow" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <link rel="alternate" type="application/rss+xml" title="BlockChain::News" href="feed.atom" />
    <link href="index.css?v1.14.4" rel="stylesheet" />
    <!-- %before-head-end.html% -->
  </head>

  <body>
    <!-- %after-body-begin.html% -->
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2022-08-25 datetime="2022-08-25T14:30:19.000Z">2022-08-25</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2022-08-25 datetime="2022-08-25T14:30:19.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >TheBlockBeats - 新闻</button>
                  <a class="source-heading__link" href="https://www.theblockbeats.info">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31695"
                        open
                      >
                        <summary class="article-expander__title">Solidity极简入门｜第二十四讲：在合约中创建新合约</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31695">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>原文标题：《Solidity 极简入门: 

24. 在合约中创建新合约

》
原文作者：0xAA 


我最近在重新学 solidity，巩固一下细节，也写一个「Solidity 极简入门」，供小白们使用（编程大佬可以另找教程），每周更新 1-3 讲。


所有代码和教程开源在 github：github.com/AmazingAng/WTFSolidity


在以太坊链上，用户（外部账户，EOA）可以创建智能合约，智能合约同样也可以创建新的智能合约。去中心化交易平台 uniswap 就是利用工厂合约（Factory）创建了无数个币对合约（Pair）。这一讲，我会用简化版的 uniswap 讲如何通过合约创建合约。


create 和 create2


有两种方法可以在合约中创建新合约，create 和 create2，这里我们讲 create，下一讲会介绍 create2。


create 的用法很简单，就是 new 一个合约，并传入新合约构造函数所需的参数：





其中 Contract 是要创建的合约名，x 是合约对象（地址），如果构造函数是 payable，可以创建时转入_value 数量的 ETH，params 是新合约构造函数的参数。


极简 Uniswap


Uniswap V2核心合约中包含两个合约：


UniswapV2Pair: 币对合约，用于管理币对地址、流动性、买卖。
UniswapV2Factory: 工厂合约，用于创建新的币对，并管理币对地址。


下面我们用 create 方法实现一个极简版的 Uniswap：Pair 币对合约负责管理币对地址，PairFactory 工厂合约用于创建新的币对，并管理币对地址。





Pair 合约很简单，包含 3 个状态变量：factory，token0 和 token1。


构造函数 constructor 在部署时将 factory 赋值为工厂合约地址。initialize 函数会在 Pair 合约创建的时候被工厂合约调用一次，将 token0 和 token1 更新为币对中两种Token的地址。


提问：为什么 uniswap 不在 constructor 中将 token0 和 token1 地址更新好？


PairFactory  





工厂合约（PairFactory）有两个状态变量 getPair 是两个

Token

地址到币对地址的 map，方便根据

Token

找到币对地址；allPairs 是币对地址的数组，存储了所有

Token

地址。


PairFactory 合约只有一个 createPair 函数，根据输入的两个

Token

地址 tokenA 和 tokenB 来创建新的 Pair 合约。其中





就是创建合约的代码，非常简单。大家可以部署好 PairFactory 合约，然后用下面两个地址作为参数调用 createPair，看看创建的币对地址是什么：  





总结


这一讲，我们用极简 Uniswap 的例子介绍了如何使用 create 方法再合约里创建合约，下一讲我们将介绍如何使用 create2 方法来实现极简 Uniswap。


原文链接

律动 BlockBeats 提醒，根据银保监会等五部门于 2018 年 8 月发布《关于防范以「虚拟货币」「区块链」名义进行非法集资的风险提示》的文件，请广大公众理性看待区块链，不要盲目相信天花乱坠的承诺，树立正确的货币观念和投资理念，切实提高风险意识；对发现的违法犯罪线索，可积极向有关部门举报反映。</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31696"
                        open
                      >
                        <summary class="article-expander__title">FTX与Binance战争升级，从勾肩搭背到针锋相对</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31696">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>FTX与Binance战争升级，从勾肩搭背到针锋相对</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31693"
                        open
                      >
                        <summary class="article-expander__title">梳理Aave的原生稳定币GHO：让DeFi减少对USDC的依赖</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31693">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>梳理Aave的原生稳定币GHO：让DeFi减少对USDC的依赖</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31687"
                        open
                      >
                        <summary class="article-expander__title">引起DAO效率低下的陷阱和待考虑因素</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31687">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>原文标题：《 The Inefficiency Trap of DAOs

》
原文作者：Ouija
原文编译：Dewei@DAOrayaki.org，

DAOrayaki


DAO 效率低下背景




DAO 通过激励用户参与活动，以促进其商业目标；同时它使个人能够一起工作，最大限度地减少信任，并保持对审查和胁迫的抵抗。




为了促进这一点，DAO 需要不同层次的复杂智能合约、组织结构和治理。因此，DAO 通常暴露在许多漏洞和低效的情况之下。Kelsie Nabben 在她的文章 &quot;DAO 漏洞 &quot;中描绘了许多此类 DAO 漏洞。一个面向计算机辅助治理的多规模 DAO 生态系统映射工具。




去中心化的决策以及如何进行决策都会产生一些负面结果。例如，目前许多 DAO 的特点是多票制投票的形式。多数规则导致选民妥协于最低的共同标准，反过来可能会产生次优的结果。




组织的结构也会影响决策过程；例如，MakerDAO 的 &quot;扁平 &quot;性质和缺乏等级制度可能会导致它缺乏一个共同的目标或目的。然而，通过简单地实施等级制度不一定能补救；许多不同的因素之间存在着细微的相互作用。在 MakerDAOs 最近的「加密治理第一原理」论坛帖子中可以看到关于这个话题的不同观点。




为了更好地理解 DAO 的低效率，我们一起来看下其背后的局限：




01 路径依赖性


许多 DAO 受到分叉或复制现象的影响。他们分叉/复制结构和流程，而不是创造或迭代特定的设计来适应自己的独特需求。这不仅体现在治理方面，也体现在 tokenomic 设计和其他任何领域。目前 DAO Token 的共同点似乎是增加 DAO

Token

价值的意图。由于这个原因，任何一个 DAO 的表现都是通过价值优化来评估的，而不是在政府程序和其他领域。




价值的优先排序会扰乱

Token
…</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2022-08-24 datetime="2022-08-24T14:33:43.000Z">2022-08-24</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2022-08-24 datetime="2022-08-24T14:33:43.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >TheBlockBeats - 新闻</button>
                  <a class="source-heading__link" href="https://www.theblockbeats.info">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31688"
                        open
                      >
                        <summary class="article-expander__title">去中心化变革中，谁将掌握加密货币的控制权？</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31688">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>原文标题：《Who will control crypto?》
 原文作者：Saffron Huang，Josh Stark
原文编译：Block unicorn



假设以太坊成功了，区块链被广泛用于全球商业和协调。任何人只要有网络连接和手机，就可以直接接入全球网络以获取金钱、价值和身份。每天，数十亿人与以太坊担保的 L2 链生态系统互动。安全做法在堆栈的每个层面都得到了改善，主要的黑客攻击基本上是不存在。企业和个人创建加密Token很常见，各国的法定货币在区块链上发行。


社会的法律、社会和经济规范代码已经存在普遍的新组织中、互动模式和数字对象（NFT 等）完全重新配置；全球经济采用区块链的 &quot;API &quot;作为默认。


但随着时间的推移，幕后会逐渐发生变化。开创这场革命的去中心化协议慢慢地失去了市场份额，被更中心化的替代方案取代。


在成功的背景下，如今庞大的加密社区内的自由意志主义情绪正在下降。便利性和成本变得更重要。各国政府和央行有时间赶上并推出自己的中心化区块链，专门在这些区块链上发行其法定货币和债券，这将经济活动吸引到这些「国家链」上。企业和个人用它们来纳税。在一些国家，政府要求其国家链是其公民唯一合法使用的区块链。


很多人都会使用国家链，这样做几乎没有摩擦; 它们不同于过去那种沉重的文书工作和银行信函验证系统。人们可以使用他们在去中心化区块链中所习惯的钱包，来做大多数相同的事情。政府甚至可以要求最受欢迎的钱包只允许访问他们选择的链，就像今天一些国家要求大型互联网公司限制访问某些内容一样。


开放区块链上的每个应用程序最终都会部署到国家链上。你最喜欢的去中心化交易、替

Token

和 NFT 游戏都可以在这个封闭的花园中使用。政府提供税收减免计划，以吸引用户将资产转移到国家链，使用国家链的其他好处包括自动税收计算和增值税扣除。


在政府的压力下…</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31689"
                        open
                      >
                        <summary class="article-expander__title">ArkStream Capital: 详解zk在扩容和隐私保护赛道的投资机会(一)</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31689">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>ArkStream Capital: 详解zk在扩容和隐私保护赛道的投资机会(一)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31684"
                        open
                      >
                        <summary class="article-expander__title">SudoSwap的NFT自动做市商AMM机制讲解</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31684">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>SudoSwap的NFT自动做市商AMM机制讲解</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31685"
                        open
                      >
                        <summary class="article-expander__title">手把手教你获取Alchemy Road to Web3第六周NFT</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31685">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>原文标题：《百亿项目 Alchemy Road to Web3 第六周 NFT 获取教程》
原文作者：Greta




Alchemy 是什么项目？




2019 年 12 月，Alchemy 完成 1500 万美元 A 轮融资，资方为 Pantera Capital，斯坦福大学，Coinbase，三星等。


2021 年 4 月，Alchemy 以 5.05 亿美元估值完成 8000 万美元 B 轮融资，Coatue 和 Addition 领投，DFJ Growth、K5 Global、Chainsmokers（烟鬼组合）、演员 Jared Leto 和 Glazer 家族参投。


2021 年 10 月，Alchemy 以 35 亿美元估值完成 2.5 亿美元 C 轮融资，由 a16z 领投的。


2022 年 2 月，Alchemy 以 102 亿美元估值完成 2 亿美元融资，Lightspeed 与 Silver Lake 领投。


Alchemy 是一个背景强大、经费充足、踏实做事、没有发币的团队，这样的项目不刷，难道去刷土狗吗？


并且，Alchemy 计划将新资金用于推广 Web3 采用，这方面的一些举措包括推出 Web3 University，就是现在的 Road to Web3 活动，活动为期 10 周，每周一个 NFT。看了下 nft 数量极少，估计由于任务难度大，很多小伙伴直接放弃，这样的项目若是空投，绝对是大毛。




手把手第六周教程开始：如何构建 Staking Dapp










step1 下载 git 并安装




从 git 官网下载 windows 版本的 git：http://git-scm.com/downloads





一般使用默认设置即可：一路 next，最后 install，git 安装完毕…</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31683"
                        open
                      >
                        <summary class="article-expander__title">美SEC主席刊文：加密监管将让投资者与市场共同获益</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31683">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>原文标题：《The SEC Treats Crypto Like the Rest of the Capital Markets》
原文作者：Gary Gensler，SEC 主席
原文编译：吴说区块链


即使新技术出现，保护投资者的证券法仍继续适用。


汽车制造商与加密借贷平台有什么关系？不论是汽车还是投资工具，消费者和投资者都应该得到保护。


1966 年 9 月，林登·约翰逊总统签署了《国家交通和机动车辆安全法》。近六年后，安全带和其他基本安全功能仍然是标准配置。尽管汽车技术有许多创新，但情况确实如此。无论汽车使用汽油还是电力，司机和乘客都应该受到保护。


同样，富兰克林·罗斯福总统在大萧条时期签署的联邦证券法旨在保护投资者。没有理由仅仅因为加密市场应用不同的技术就将其与其他资本市场区别对待。


最近的市场事件表明，为什么加密公司遵守证券法至关重要。一些加密借贷平台冻结了投资者的账户或直接破产。当平台破产时，这些投资者必须在法庭上排队。


考虑这个假设：Bob 运行的 APP 可以提高 4%、7% 或 19% 的回报率。Alice 和数百万日常投资者将他们的资产放在该 APP 中。投资者受益于了解 Bob 声称他将提供一定回报的理由。如果一项投资听起来好得令人难以置信，那么它可能是真的。Alice 可以根据这些披露决定是否投资。


这些披露有助于她了解 Bob 对她的资产做了什么。他在交易吗？他是否将资产借给其他投资者？他在经营对冲基金吗？他如何为承诺的回报提供资金，他承担了哪些风险？


值得注意的是，Alice 在 Bob 的 APP 中投入了什么样的资产——现金、黄金、比特币、龙猫或其他任何东西——并不重要。Bob 对这些资产所做的决定了法律提供了哪些保护。


此外，根据 Bob 如何使用 Alice 的资产，他还可能经营一家投资公司，例如共同基金。在这种情况下，Bob 将不得不提供额外的担保，这使欺诈投资者变得更加困难。


Bob 无法通过在产品或承诺的利益上贴上新的标签来躲过这些久经考验的投资者保护措施。他可能将其称为利息、收益、收入或年化收益奖励。他可能会说他的 APP 是一个借贷平台、一个加密货币交易平台或一个去中心化金融平台。在数十年的案例中，最高法院明确表示，产品的经济现实——而不是标签——决定了它是否是证券法下的证券。


美国证券交易委员会在最近与加密借贷平台 BlockFi 的协议中证实了这一点。该公司从 570,000 名投资者那里借入了超过 100 亿美元的加密资产，为他们提供了可变利率作为回报。这使得其向投资者提供的贷款产品——BlockFi 利息账户，实质上成为一种证券。BlockFi 汇集这些资产，将其打包贷款给机构借款人，并用于投资其他证券。这使 BlockFi 成为一家投资公司。


在这里 BlockFi 借用了加密货币并不是问题。事实上，你可以用任何其他资产替换「加密货币」。问题在于它对借入的资产做了什么，而它作为一家公司没有做什么：向投资者提供所需的披露。遵守我们的法律可以保护投资大众。不幸的是，一些提供加密贷款的平台并没有遵守。


我们摒弃加密借贷不受监管的想法。实际上，这些规则已经存在了几十年。一些加密平台却没有遵守规则。不合规并不是加密商业模式或底层加密技术的必然结果。然而，这些平台却好像在说他们有选择——或者更糟糕的是，说「可以的话就抓住我们」。


正如我在去年的演讲所说的「不要搞错：如果借贷平台提供证券，它就受 SEC 监管。」在许多情况下，委员会和州监管机构已经解决了相关判例法在涉及加密资产和加密借贷时如何应用的问题。


就像汽车制造商要增加安全带一样，遵守证券法是有成本的。无论如何，提供加密借贷的平台都需要遵守，不仅因为这是法律，还因为它有助于保护投资者并增加对我们市场的信任。


幸运的是，有一条前进的道路。我鼓励提供加密借贷的平台进来并与 SEC 工作人员交流。让这些平台遵守证券法将使投资者和加密市场共同受益。


与此同时，SEC 将充当警察对加密市场进行监管。与汽车安全带一样，我们需要让保护投资者成为加密市场的标准。


原文链接

律动 BlockBeats 提醒，根据银保监会等五部门于 2018 年 8 月发布《关于防范以「虚拟货币」「区块链」名义进行非法集资的风险提示》的文件，请广大公众理性看待区块链，不要盲目相信天花乱坠的承诺，树立正确的货币观念和投资理念，切实提高风险意识；对发现的违法犯罪线索，可积极向有关部门举报反映。</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31682"
                        open
                      >
                        <summary class="article-expander__title">进击的虚拟货币监管和摩擦</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31682">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>撰文：傅卓蕊


也许谁也没有想到，几周前隐私交易应用 Tornado Cash 被 OFAC 制裁能引发如此规模的连锁反应，从 DeFi 应用的前端屏蔽地址，到开发者被抓，再到影响以太坊这条全球最大去中心化生态网络的抗审查性，事情的严重性已经远超预想。




也许大家会有疑问，加密货币并不是第一次遇到监管，但为什么这次监管甚至影响到了网络的根基？这场制裁的不同点是什么？




何为 OFAC？


成立于 1950 年，外国资产控制办公室（the Office of Foreign Assets Control，简称 OFAC）是美国财政部下属的一个机构，主要对反对美国利益的外国人和组织进行经济或者贸易制裁，权力很大，名声相对较小，制裁效果明显，往往上了 OFAC 名单会给被制裁的目标带来深远的影响。


 
OFAC 的创立来源于国会于 1977 年通过的一项法案——《国际紧急经济权力法》（简称 IEEPA），该法案首先要遵守美国宪法，所以行使法案相关权力的行为也要符合美国宪法。IEEPA 给予总统（国家行政机构）宣布国家紧急状态的权力，从而阻止受美国管辖的人和组织进行任何涉及外国势力损害美国利益的活动。IEEPA 给予了 OFAC 封锁财产的权力，其核心是「财产」。911 之后，为了从财务上更好地打击恐怖组织，当时的美国总统布什推进国会通过了另一项法案《美国爱国者法案》，实质上将 IEEPA 拟定的行政权扩大了，并给予了 OFAC 很大的权力。该法案允许 OFAC 封锁「调查中（pendency of an investigation）」的财产，并不必为此提出解释或提供确凿的证据。


 
在 OFAC 开始将制裁的大棒挥向加密货币和区块链行业之前，OFAC 的传统制裁对象一般是意识形态上挑战美国的与主权国家相关的个人与组织。2021 年 10 月，OFAC 发布…</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31680"
                        open
                      >
                        <summary class="article-expander__title">Solidity极简入门｜第二十二讲：Call</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31680">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>原文标题：《

Solidity 极简入门: 22. Call

》
原文作者：0xAA     


我最近在重新学 solidity，巩固一下细节，也写一个「Solidity 极简入门」，供小白们使用（编程大佬可以另找教程），每周更新 1-3 讲。


所有代码和教程开源在 github： github.com/AmazingAng/WTFSolidity


我们曾在第 17 讲：发送 ETH那一讲介绍过利用 call 来发送 ETH，这一讲我们将介绍如何利用它调用合约。


Call


call 是 address 类型的低级成员函数，它用来与其他合约交互。它的返回值为 (bool, data)，分别对应 call 是否成功以及目标函数的返回值。


call 是 solidity 官方推荐的通过触发 fallback 或 receive 函数发送 ETH 的方法。不推荐用 call 来调用另一个合约，因为当你调用不安全合约的函数时，你就把主动权交给了它。推荐的方法仍是声明合约变量后调用函数，见第 19 讲：调用其他合约。当我们不知道对方合约的源代码或 ABI，就没法生成合约变量；这时，我们仍可以通过 call 调用对方合约的函数。


call 的使用规则


call 的使用规则如下：





其中二进制编码利用结构化编码函数 abi.encodeWithSignature 获得：





函数签名为&quot;函数名（逗号分隔的参数类型)&quot;。例如 abi.encodeWithSignature(&quot;f(uint256,address)&quot;, _x, _addr)。


另外 call 在调用合约时可以指定交易发送的 ETH 数额和 gas：





看起来有点复杂，下面我们举个 call 应用的例子。


目标合约


我们先写一个简单的目标合约 OtherContract 并部署，代码与第 19 讲中基本相同，只是多了 fallback 函数。





这个合约包含一个状态变量 x，一个事件 Log 在收到 ETH 时触发，三个函数：


getBalance(): 返回合约 ETH 余额。setX(): external payable 函数，可以设置 x 的值，并向合约发送 ETH。getX(): 读取 x 的值。


利用 call 调用目标合约


1. Response 事件


我们写一个 Call 合约来调用目标合约函数。首先先写一个定义 Response 事件，输出 call 返回的 success 和 data，方便我们观察返回值。





2. 调用 setX 函数


我们定义 callSetX 函数来调用目标合约的 setX()，转入 msg.value 数额的 ETH，并释放 Response 事件输出 success 和 data：





接下来我们调用 callSetX 把状态变量_x 改为 5，参数为 OtherContract 地址和 5，由于目标函数 setX() 没有返回值，因此 Response 事件输出的 data 为 0x，也就是空。


3. 调用 getX 函数


下面我们调用 getX() 函数，它将返回目标合约_x 的值，类型为 uint256。我们可以利用 abi.decode 来解码 call 的返回值 data，并读出数值。





从 Response 事件的输出，我们可以看到 data 为 0x0000000000000000000000000000000000000000000000000000000000000005。而经过 abi.decode，最终返回值为 5。


4. 调用不存在的函数


如果我们给 call 输入的函数不存在于目标合约，那么目标合约的 fallback 函数会被触发。





上面例子中，我们 call 了不存在的 foo 函数。call 仍能执行成功，并返回 success，但其实调用的目标合约 fallback 函数。


总结


这一讲，我们介绍了如何用 call 这一低级函数来调用其他合约。call 不是调用合约的推荐方法，因为不安全。但他能让我们在不知道源代码和 ABI 的情况下调用目标合约，很有用。


原文链接

律动 BlockBeats 提醒，根据银保监会等五部门于 2018 年 8 月发布《关于防范以「虚拟货币」「区块链」名义进行非法集资的风险提示》的文件，请广大公众理性看待区块链，不要盲目相信天花乱坠的承诺，树立正确的货币观念和投资理念，切实提高风险意识；对发现的违法犯罪线索，可积极向有关部门举报反映。</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2022-08-23 datetime="2022-08-23T14:01:45.000Z">2022-08-23</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2022-08-23 datetime="2022-08-23T14:01:45.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >TheBlockBeats - 新闻</button>
                  <a class="source-heading__link" href="https://www.theblockbeats.info">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31678"
                        open
                      >
                        <summary class="article-expander__title">数据解析：NFT市场加速下跌，是否进入抄底时刻？</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31678">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>数据解析：NFT市场加速下跌，是否进入抄底时刻？</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31681"
                        open
                      >
                        <summary class="article-expander__title">墨西哥黑客松前 12 个入围新项目一览</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31681">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>8 月 19 日至 21 日，ETHGlobal 于墨西哥举办了为期 3 天的 ETHMexico 黑客马拉松。有 12 项应用入围决赛，其中有 8 项应用构建在 Polygon 之上，且 Lens Protocol 也被频频应用其中。




接下来律动 BlockBeats 将对这些新项目进行简单的介绍。




Datamorpho


 
Datamorpho 是一个使用密码学和 IPFS 的动态文件标准和协议，它允许任何文件随时间进行数据变形。


 
项目需要 IPFS 协议提供的可靠性来信任任何存储的数据变形文件的真实性。任何类型的文件/NFT 都能够将其数据内容转换为「使用隐藏状态进行混淆和加密的不同内容」。这些文件在其输出中是动态的，但数据内容是相同的。




Keyppi


 
Keyppi 是一个私钥恢复平台。通过使用身份证明实施零知识证明、分散存储和身份验证来保护用户密钥。


 
用户可使用该平台注册一组新的私钥，选择想使用的钱包类型，填写钱包地址、私钥和电子邮件/短信等。




也可通过其检索以前注册的私钥，使用自己的 World ID 登录，触发通过电子邮件/短信验证其身份的证明，证明成功后，平台将接收到的 nullifier 发送到 zkApp 并解密与其关联的信息，用户即可检索私钥。



最后，用户还能将其加密的私钥分享给朋友或家人，通过该平台安全地赠送钱包，新所有者收到后替换 World ID nullifier 也能使用检索功能。




Kiwik


 
Kiwik 是游戏玩家和元宇宙建设者的 NFT 市场，项目认为，在游戏和虚拟世界中目前缺乏质量和价格合理的 3D 资产，所以允许创作者和游戏开发者买卖 Token 化 3D 资产来创建更高质量和数量的游戏和虚拟世界。




对于创作者来说，可在该平台上以 Polygon …</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31679"
                        open
                      >
                        <summary class="article-expander__title">新公链Canto生态：用稳定币进行高年化流动性挖矿</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31679">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>原文标题：《Humble Farmer&#x27;s CANTO Guide - Earn 4 digits APR farming on CANTO》
原文来源：The Farmers Club 
原文编译：0x214，BlockBeats




过去几天市场平淡，但是在 8 月 26 日杰克逊霍尔（Jackson Hole）全球央行年会到来之前，预计市场仍会经历一波动荡。为了提醒自己不要冲动行事，我刚刚在电脑显示器上贴了一张便签，写着「不许过度交易！」。




与此同时，我一直在去中心化交易平台Perpetual Protocol和 Canto 公链上相对轻松地获取收益，在本文中我将着重介绍后者。如果你有兴趣用 NOTE 稳定币赚取超过 600% 年利率，不妨往下看看。







Canto 最开始是 EVMOS 链的分叉，是一条基于 Cosmos SDK 打造的 EVM 兼容 Layer1 公链。Canto 声称自己是一条完全去中心化的区块链，无 Token 预售、无官方团队、无 VC 资本扶持。该项目由几位核心贡献者构建，包括 DeFi OG、Defipulse 和 Slingshot 联创Scott Lewis。




更多关于 Canto 的信息请点击此处。




首先，我们需要明白，打造一条新的公链是有很高风险的，毕竟 Canto 及其基础设施还没有经过「实战测试」。我也并不是专门来吹捧（shill）Canto 的，我实际拥有的 CANTO Token 数量也并不多。目前 Canto 体量尚小，流动性不佳。然而，这其中不乏一些收益率颇丰的流动性挖矿（yield farming）机会。


我个人认为，Canto 提供核心 DeFi 原语作为免费公共基础设施的想法是具有实验性质的，我也很期待 Canto 后续发展。




Canto 并不依赖第三方构建者，而…</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31671"
                        open
                      >
                        <summary class="article-expander__title">如何通过Fracton协议买到折扣价的CryptoPunks？</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31671">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>原文标题：《

一名用户通过 Fracton 协议，以 8.6 折价格兑换 PUNKS 并获得近 45%ROI

》
原文来源：NFT 研究所





7 月 31 日，Tiffany &amp; Co. 官方 Twitter 发布消息，决定将于 8 月 5 日在其 NFT 官网以 30 ETH 的价格发售 250 个限量 NFT——「NFTiff」。


持有 CryptoPunks 的用户可以通过同时持有该 NFT 兑换一条由贵金属和宝石打造的实物朋克项链，且该项链将与用户所持有的 CryptoPunks 一模一样。


该消息一经发布，CryptoPunks 的地板价应声上涨 10%，并于 8 月 3 日最高涨到 77.55ETH。


发售当天，NFTiff 仅在 20 分左右就被抢购一空，并且其在 Opensea 的最高成交价达到了 55 个 ETH。



  左：NFTiff 活动官推 右：吊坠效果图


在如此高的关注度下，不少人都尝试利用该热点对自己的项目进行营销。


如 Chain 的 CEO 在 8 月 11 日发推表示将抽奖送出一个 CryptoPunks。  





此外，KuCoin 也于 8 月 9 日开启了一个使用 hiPUNKS 兑换 CryptoPunks 赠送 NFTiff 的活动。  





hiPUNKS 的价格在 8 月 9 日约为 0.14 usdt。而当天 CryptoPunks 的地板价为 73.95ETH，那就意味着可以瞬间用 140k usdt 换取价值 73.95 个 ETH 的 CryptoPunks 和 30 个 ETH 的 NFTiff，以当时 ETH 1800usdt 的价格计算，那就是 33.65% 的收益率。那么是否真的有人去兑换？而 KuCoin 是否真的把这 3 个 NFTiff 都送出去了？


…</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://www.theblockbeats.info/news/31672"
                        open
                      >
                        <summary class="article-expander__title">详解Bedrock：Optimism推出的全新Rollup架构</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://www.theblockbeats.info/news/31672">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>详解Bedrock：Optimism推出的全新Rollup架构</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>

    <footer>
      <a class="footer-link" href="https://github.com/joyc/bc-news/actions/runs/2928726379">
        <time id="build-timestamp" datetime="2022-08-25T18:09:58.472Z">2022-08-25T18:09:58.472Z</time>
      </a>
      <a class="footer-link" href="https://github.com/osmoscraft/osmosfeed">osmosfeed 1.15.1</a>
    </footer>
    <script src="index.js?v1.14.4"></script>
    <!-- %before-body-end.html% -->
  </body>

</html>