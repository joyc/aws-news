{
  "sources": [
    {
      "title": "TheBlockBeats - 新闻",
      "feedUrl": "https://rsshub.app/blockbeats/news",
      "siteUrl": "https://www.theblockbeats.info",
      "articles": [
        {
          "id": "https://www.theblockbeats.info/news/31701",
          "author": null,
          "description": "原文作者：@DeFi_Made_Here\n原文编译：0x711、0x214，BlockBeats\n\n\n\n\n下半年以来，越来越多 DeFi 项目选择将现实资产引入其生态。Aave、MakerDAO 都在推进将现实资产作为抵押物发行 Stablecoin 的计划。8 月 25 日，TangibleDAO 宣布于 Polygon 网络发行由实体房地产支持的、锚定美元的 Stablecoin USDR。USDR 可以随时以 1：1 兑换 为 DAI，USDR 将通过超额抵押房地产来发行 Token，并将收益分配给持有者。\n\n\n\n\n现实资产之于 DeFi 究竟是新大陆，还是潘多拉魔盒，社区议论纷纷。DeFi 研究员 @DeFi_Made_Here 在其社交平台对 RWA 资产及 USDR 进行了详细解读，BlockBeats 对其整理翻译如下。\n\n\n首先，什么是 RWA？\n\n\nRWA 代表「现实世界资产」（Real World Assets），在我看来，这正是加密世界和 DeFi 所缺少的东西。因为很多加密货币项目正在解决的都是「并不存在的问题」。\n\n\n\n\n\n\n\n能将 RWA 整合到加密世界中的项目一直在缓慢增加，但总体上，这类项目的数量还是很少。而本文将着重讨论由 RWA 支持的 Stablecoin。\n\n\n\n\nRWA 支持的 Stablecoin\n\n\n7 月 7 日，Aave 社区发布征求意见ARC 提案，提议基于以太坊主网发行去中心化超额抵押 Stablecoin GHO，这件事立刻引起了我的注意。该提案中提到，未来，如果管理部门批准，可以用 RWA 外部服务商作为储备铸造 GHO。\n\n\n\n\n7 月 8 日，MakerDao社区投票通过了在 Maker 协议中添加 RWA-009（HVBank）保险库的提案，该保险库允许银行在其资产负债表上存入链下贷款作为抵押品后借入 DAI。…",
          "link": "https://www.theblockbeats.info/news/31701",
          "publishedOn": "2022-08-26T08:34:49.000Z",
          "wordCount": null,
          "title": "房产支持的Stablecoin，DeFi发现了新大陆？",
          "imageUrl": null
        },
        {
          "id": "https://www.theblockbeats.info/news/31699",
          "author": null,
          "description": "原文标题：《Move：Web3 的 Javascript》\n原文来源：Bixin Ventures\n\n\n\n\n前言：   \n  \n环顾 Twitter 帖子和加密出版物，Sui 和 Aptos 的名字总是出现。这些新的高吞吐量 L1 区块链是怎么回事？为什么它们会吸引 a16z、FTX、Multicoin 等公司的投资？我们发现这两个区块链都与 Diem 有着深厚的历史渊源，并且都使用一种新的编程语言——Move。\n\n\n\n\n在本文中，我们将深入探讨 Move 的特性，并简要介绍采用 Move 的 Sui、Aptos 等区块链，然后回顾 Solidity/EVM 的诞生，最后对比 Move 和 MoveVM 是否可以打造属于自己的充满活力的生态系统。\n\n\n\n\n\n\n\n\n\n简易目录：\n\n\n\n\n一、Move 的起源\n二、Move 的优势\n三、Move 的开发生态\n四、Solidity/EVM：它如何成为最具活力的开发者生态系统\n五、Move 语言的未来\n\n\n\n\n一、Move 的起源\n\n\n\n\nMove 是一种基于 Rust 的编程语言，它是为 Meta 的 Diem 区块链项目而开发的。该团队当时正在研究其他智能合约语言，但没有一种语言具有稀缺性、确定性和可验证性的特性，所以他们构建了 Move。\n\n\n\n\n现有的 Move github 源码库目前由 Mysten Labs 管理，Aptos 和 Sui 的团队组成了 Move 的核心开发团队。Move 语言的愿景就是成为 Web3 中的 Javascript，帮助开发人员安全、轻松、快速地构建区块链应用程序的框架。\n\n\n\n\n二、Move 的优势\n\n\n\n\nMove 与平台无关，支持跨区块链的共享库、工具和开发人员社区。Move 语言的设计强调安全性，旨在避免许多 Web3.0 用户受害的情形，包括但不限于重入漏洞（re-entrancy…",
          "link": "https://www.theblockbeats.info/news/31699",
          "publishedOn": "2022-08-26T04:16:04.000Z",
          "wordCount": null,
          "title": "详解Move：是否能成为Web3中的Javascript？",
          "imageUrl": null
        },
        {
          "id": "https://www.theblockbeats.info/news/31695",
          "author": null,
          "description": "原文标题：《Solidity 极简入门: \n\n24. 在合约中创建新合约\n\n》\n原文作者：0xAA \n\n\n我最近在重新学 solidity，巩固一下细节，也写一个「Solidity 极简入门」，供小白们使用（编程大佬可以另找教程），每周更新 1-3 讲。\n\n\n所有代码和教程开源在 github：github.com/AmazingAng/WTFSolidity\n\n\n在以太坊链上，用户（外部账户，EOA）可以创建智能合约，智能合约同样也可以创建新的智能合约。去中心化交易平台 uniswap 就是利用工厂合约（Factory）创建了无数个币对合约（Pair）。这一讲，我会用简化版的 uniswap 讲如何通过合约创建合约。\n\n\ncreate 和 create2\n\n\n有两种方法可以在合约中创建新合约，create 和 create2，这里我们讲 create，下一讲会介绍 create2。\n\n\ncreate 的用法很简单，就是 new 一个合约，并传入新合约构造函数所需的参数：\n\n\n\n\n\n其中 Contract 是要创建的合约名，x 是合约对象（地址），如果构造函数是 payable，可以创建时转入_value 数量的 ETH，params 是新合约构造函数的参数。\n\n\n极简 Uniswap\n\n\nUniswap V2核心合约中包含两个合约：\n\n\nUniswapV2Pair: 币对合约，用于管理币对地址、流动性、买卖。\nUniswapV2Factory: 工厂合约，用于创建新的币对，并管理币对地址。\n\n\n下面我们用 create 方法实现一个极简版的 Uniswap：Pair 币对合约负责管理币对地址，PairFactory 工厂合约用于创建新的币对，并管理币对地址。\n\n\n\n\n\nPair 合约很简单，包含 3 个状态变量：factory，token0 和 token1。\n\n\n构造函数 constructor 在部署时将 factory 赋值为工厂合约地址。initialize 函数会在 Pair 合约创建的时候被工厂合约调用一次，将 token0 和 token1 更新为币对中两种Token的地址。\n\n\n提问：为什么 uniswap 不在 constructor 中将 token0 和 token1 地址更新好？\n\n\nPairFactory  \n\n\n\n\n\n工厂合约（PairFactory）有两个状态变量 getPair 是两个\n\nToken\n\n地址到币对地址的 map，方便根据\n\nToken\n\n找到币对地址；allPairs 是币对地址的数组，存储了所有\n\nToken\n\n地址。\n\n\nPairFactory 合约只有一个 createPair 函数，根据输入的两个\n\nToken\n\n地址 tokenA 和 tokenB 来创建新的 Pair 合约。其中\n\n\n\n\n\n就是创建合约的代码，非常简单。大家可以部署好 PairFactory 合约，然后用下面两个地址作为参数调用 createPair，看看创建的币对地址是什么：  \n\n\n\n\n\n总结\n\n\n这一讲，我们用极简 Uniswap 的例子介绍了如何使用 create 方法再合约里创建合约，下一讲我们将介绍如何使用 create2 方法来实现极简 Uniswap。\n\n\n原文链接\n\n律动 BlockBeats 提醒，根据银保监会等五部门于 2018 年 8 月发布《关于防范以「虚拟货币」「区块链」名义进行非法集资的风险提示》的文件，请广大公众理性看待区块链，不要盲目相信天花乱坠的承诺，树立正确的货币观念和投资理念，切实提高风险意识；对发现的违法犯罪线索，可积极向有关部门举报反映。",
          "link": "https://www.theblockbeats.info/news/31695",
          "publishedOn": "2022-08-25T14:30:19.000Z",
          "wordCount": null,
          "title": "Solidity极简入门｜第二十四讲：在合约中创建新合约",
          "imageUrl": null
        },
        {
          "id": "https://www.theblockbeats.info/news/31696",
          "author": null,
          "description": "FTX与Binance战争升级，从勾肩搭背到针锋相对",
          "link": "https://www.theblockbeats.info/news/31696",
          "publishedOn": "2022-08-25T09:11:47.000Z",
          "wordCount": null,
          "title": "FTX与Binance战争升级，从勾肩搭背到针锋相对",
          "imageUrl": null
        },
        {
          "id": "https://www.theblockbeats.info/news/31693",
          "author": null,
          "description": "梳理Aave的原生稳定币GHO：让DeFi减少对USDC的依赖",
          "link": "https://www.theblockbeats.info/news/31693",
          "publishedOn": "2022-08-25T08:43:47.000Z",
          "wordCount": null,
          "title": "梳理Aave的原生稳定币GHO：让DeFi减少对USDC的依赖",
          "imageUrl": null
        },
        {
          "id": "https://www.theblockbeats.info/news/31687",
          "author": null,
          "description": "原文标题：《 The Inefficiency Trap of DAOs\n\n》\n原文作者：Ouija\n原文编译：Dewei@DAOrayaki.org，\n\nDAOrayaki\n\n\nDAO 效率低下背景\n\n\n\n\nDAO 通过激励用户参与活动，以促进其商业目标；同时它使个人能够一起工作，最大限度地减少信任，并保持对审查和胁迫的抵抗。\n\n\n\n\n为了促进这一点，DAO 需要不同层次的复杂智能合约、组织结构和治理。因此，DAO 通常暴露在许多漏洞和低效的情况之下。Kelsie Nabben 在她的文章 \"DAO 漏洞 \"中描绘了许多此类 DAO 漏洞。一个面向计算机辅助治理的多规模 DAO 生态系统映射工具。\n\n\n\n\n去中心化的决策以及如何进行决策都会产生一些负面结果。例如，目前许多 DAO 的特点是多票制投票的形式。多数规则导致选民妥协于最低的共同标准，反过来可能会产生次优的结果。\n\n\n\n\n组织的结构也会影响决策过程；例如，MakerDAO 的 \"扁平 \"性质和缺乏等级制度可能会导致它缺乏一个共同的目标或目的。然而，通过简单地实施等级制度不一定能补救；许多不同的因素之间存在着细微的相互作用。在 MakerDAOs 最近的「加密治理第一原理」论坛帖子中可以看到关于这个话题的不同观点。\n\n\n\n\n为了更好地理解 DAO 的低效率，我们一起来看下其背后的局限：\n\n\n\n\n01 路径依赖性\n\n\n许多 DAO 受到分叉或复制现象的影响。他们分叉/复制结构和流程，而不是创造或迭代特定的设计来适应自己的独特需求。这不仅体现在治理方面，也体现在 tokenomic 设计和其他任何领域。目前 DAO Token 的共同点似乎是增加 DAO\n\nToken\n\n价值的意图。由于这个原因，任何一个 DAO 的表现都是通过价值优化来评估的，而不是在政府程序和其他领域。\n\n\n\n\n价值的优先排序会扰乱\n\nToken\n…",
          "link": "https://www.theblockbeats.info/news/31687",
          "publishedOn": "2022-08-25T02:02:57.000Z",
          "wordCount": null,
          "title": "引起DAO效率低下的陷阱和待考虑因素",
          "imageUrl": null
        },
        {
          "id": "https://www.theblockbeats.info/news/31688",
          "author": null,
          "description": "原文标题：《Who will control crypto?》\n 原文作者：Saffron Huang，Josh Stark\n原文编译：Block unicorn\n\n\n\n假设以太坊成功了，区块链被广泛用于全球商业和协调。任何人只要有网络连接和手机，就可以直接接入全球网络以获取金钱、价值和身份。每天，数十亿人与以太坊担保的 L2 链生态系统互动。安全做法在堆栈的每个层面都得到了改善，主要的黑客攻击基本上是不存在。企业和个人创建加密Token很常见，各国的法定货币在区块链上发行。\n\n\n社会的法律、社会和经济规范代码已经存在普遍的新组织中、互动模式和数字对象（NFT 等）完全重新配置；全球经济采用区块链的 \"API \"作为默认。\n\n\n但随着时间的推移，幕后会逐渐发生变化。开创这场革命的去中心化协议慢慢地失去了市场份额，被更中心化的替代方案取代。\n\n\n在成功的背景下，如今庞大的加密社区内的自由意志主义情绪正在下降。便利性和成本变得更重要。各国政府和央行有时间赶上并推出自己的中心化区块链，专门在这些区块链上发行其法定货币和债券，这将经济活动吸引到这些「国家链」上。企业和个人用它们来纳税。在一些国家，政府要求其国家链是其公民唯一合法使用的区块链。\n\n\n很多人都会使用国家链，这样做几乎没有摩擦; 它们不同于过去那种沉重的文书工作和银行信函验证系统。人们可以使用他们在去中心化区块链中所习惯的钱包，来做大多数相同的事情。政府甚至可以要求最受欢迎的钱包只允许访问他们选择的链，就像今天一些国家要求大型互联网公司限制访问某些内容一样。\n\n\n开放区块链上的每个应用程序最终都会部署到国家链上。你最喜欢的去中心化交易、替\n\nToken\n\n和 NFT 游戏都可以在这个封闭的花园中使用。政府提供税收减免计划，以吸引用户将资产转移到国家链，使用国家链的其他好处包括自动税收计算和增值税扣除。\n\n\n在政府的压力下…",
          "link": "https://www.theblockbeats.info/news/31688",
          "publishedOn": "2022-08-24T14:33:43.000Z",
          "wordCount": null,
          "title": "去中心化变革中，谁将掌握加密货币的控制权？",
          "imageUrl": null
        },
        {
          "id": "https://www.theblockbeats.info/news/31689",
          "author": null,
          "description": "ArkStream Capital: 详解zk在扩容和隐私保护赛道的投资机会(一)",
          "link": "https://www.theblockbeats.info/news/31689",
          "publishedOn": "2022-08-24T10:41:24.000Z",
          "wordCount": null,
          "title": "ArkStream Capital: 详解zk在扩容和隐私保护赛道的投资机会(一)",
          "imageUrl": null
        },
        {
          "id": "https://www.theblockbeats.info/news/31684",
          "author": null,
          "description": "SudoSwap的NFT自动做市商AMM机制讲解",
          "link": "https://www.theblockbeats.info/news/31684",
          "publishedOn": "2022-08-24T10:20:24.000Z",
          "wordCount": null,
          "title": "SudoSwap的NFT自动做市商AMM机制讲解",
          "imageUrl": null
        },
        {
          "id": "https://www.theblockbeats.info/news/31685",
          "author": null,
          "description": "原文标题：《百亿项目 Alchemy Road to Web3 第六周 NFT 获取教程》\n原文作者：Greta\n\n\n\n\nAlchemy 是什么项目？\n\n\n\n\n2019 年 12 月，Alchemy 完成 1500 万美元 A 轮融资，资方为 Pantera Capital，斯坦福大学，Coinbase，三星等。\n\n\n2021 年 4 月，Alchemy 以 5.05 亿美元估值完成 8000 万美元 B 轮融资，Coatue 和 Addition 领投，DFJ Growth、K5 Global、Chainsmokers（烟鬼组合）、演员 Jared Leto 和 Glazer 家族参投。\n\n\n2021 年 10 月，Alchemy 以 35 亿美元估值完成 2.5 亿美元 C 轮融资，由 a16z 领投的。\n\n\n2022 年 2 月，Alchemy 以 102 亿美元估值完成 2 亿美元融资，Lightspeed 与 Silver Lake 领投。\n\n\nAlchemy 是一个背景强大、经费充足、踏实做事、没有发币的团队，这样的项目不刷，难道去刷土狗吗？\n\n\n并且，Alchemy 计划将新资金用于推广 Web3 采用，这方面的一些举措包括推出 Web3 University，就是现在的 Road to Web3 活动，活动为期 10 周，每周一个 NFT。看了下 nft 数量极少，估计由于任务难度大，很多小伙伴直接放弃，这样的项目若是空投，绝对是大毛。\n\n\n\n\n手把手第六周教程开始：如何构建 Staking Dapp\n\n\n\n\n\n\n\n\n\n\nstep1 下载 git 并安装\n\n\n\n\n从 git 官网下载 windows 版本的 git：http://git-scm.com/downloads\n\n\n\n\n\n一般使用默认设置即可：一路 next，最后 install，git 安装完毕…",
          "link": "https://www.theblockbeats.info/news/31685",
          "publishedOn": "2022-08-24T04:00:49.000Z",
          "wordCount": null,
          "title": "手把手教你获取Alchemy Road to Web3第六周NFT",
          "imageUrl": null
        },
        {
          "id": "https://www.theblockbeats.info/news/31683",
          "author": null,
          "description": "原文标题：《The SEC Treats Crypto Like the Rest of the Capital Markets》\n原文作者：Gary Gensler，SEC 主席\n原文编译：吴说区块链\n\n\n即使新技术出现，保护投资者的证券法仍继续适用。\n\n\n汽车制造商与加密借贷平台有什么关系？不论是汽车还是投资工具，消费者和投资者都应该得到保护。\n\n\n1966 年 9 月，林登·约翰逊总统签署了《国家交通和机动车辆安全法》。近六年后，安全带和其他基本安全功能仍然是标准配置。尽管汽车技术有许多创新，但情况确实如此。无论汽车使用汽油还是电力，司机和乘客都应该受到保护。\n\n\n同样，富兰克林·罗斯福总统在大萧条时期签署的联邦证券法旨在保护投资者。没有理由仅仅因为加密市场应用不同的技术就将其与其他资本市场区别对待。\n\n\n最近的市场事件表明，为什么加密公司遵守证券法至关重要。一些加密借贷平台冻结了投资者的账户或直接破产。当平台破产时，这些投资者必须在法庭上排队。\n\n\n考虑这个假设：Bob 运行的 APP 可以提高 4%、7% 或 19% 的回报率。Alice 和数百万日常投资者将他们的资产放在该 APP 中。投资者受益于了解 Bob 声称他将提供一定回报的理由。如果一项投资听起来好得令人难以置信，那么它可能是真的。Alice 可以根据这些披露决定是否投资。\n\n\n这些披露有助于她了解 Bob 对她的资产做了什么。他在交易吗？他是否将资产借给其他投资者？他在经营对冲基金吗？他如何为承诺的回报提供资金，他承担了哪些风险？\n\n\n值得注意的是，Alice 在 Bob 的 APP 中投入了什么样的资产——现金、黄金、比特币、龙猫或其他任何东西——并不重要。Bob 对这些资产所做的决定了法律提供了哪些保护。\n\n\n此外，根据 Bob 如何使用 Alice 的资产，他还可能经营一家投资公司，例如共同基金。在这种情况下，Bob 将不得不提供额外的担保，这使欺诈投资者变得更加困难。\n\n\nBob 无法通过在产品或承诺的利益上贴上新的标签来躲过这些久经考验的投资者保护措施。他可能将其称为利息、收益、收入或年化收益奖励。他可能会说他的 APP 是一个借贷平台、一个加密货币交易平台或一个去中心化金融平台。在数十年的案例中，最高法院明确表示，产品的经济现实——而不是标签——决定了它是否是证券法下的证券。\n\n\n美国证券交易委员会在最近与加密借贷平台 BlockFi 的协议中证实了这一点。该公司从 570,000 名投资者那里借入了超过 100 亿美元的加密资产，为他们提供了可变利率作为回报。这使得其向投资者提供的贷款产品——BlockFi 利息账户，实质上成为一种证券。BlockFi 汇集这些资产，将其打包贷款给机构借款人，并用于投资其他证券。这使 BlockFi 成为一家投资公司。\n\n\n在这里 BlockFi 借用了加密货币并不是问题。事实上，你可以用任何其他资产替换「加密货币」。问题在于它对借入的资产做了什么，而它作为一家公司没有做什么：向投资者提供所需的披露。遵守我们的法律可以保护投资大众。不幸的是，一些提供加密贷款的平台并没有遵守。\n\n\n我们摒弃加密借贷不受监管的想法。实际上，这些规则已经存在了几十年。一些加密平台却没有遵守规则。不合规并不是加密商业模式或底层加密技术的必然结果。然而，这些平台却好像在说他们有选择——或者更糟糕的是，说「可以的话就抓住我们」。\n\n\n正如我在去年的演讲所说的「不要搞错：如果借贷平台提供证券，它就受 SEC 监管。」在许多情况下，委员会和州监管机构已经解决了相关判例法在涉及加密资产和加密借贷时如何应用的问题。\n\n\n就像汽车制造商要增加安全带一样，遵守证券法是有成本的。无论如何，提供加密借贷的平台都需要遵守，不仅因为这是法律，还因为它有助于保护投资者并增加对我们市场的信任。\n\n\n幸运的是，有一条前进的道路。我鼓励提供加密借贷的平台进来并与 SEC 工作人员交流。让这些平台遵守证券法将使投资者和加密市场共同受益。\n\n\n与此同时，SEC 将充当警察对加密市场进行监管。与汽车安全带一样，我们需要让保护投资者成为加密市场的标准。\n\n\n原文链接\n\n律动 BlockBeats 提醒，根据银保监会等五部门于 2018 年 8 月发布《关于防范以「虚拟货币」「区块链」名义进行非法集资的风险提示》的文件，请广大公众理性看待区块链，不要盲目相信天花乱坠的承诺，树立正确的货币观念和投资理念，切实提高风险意识；对发现的违法犯罪线索，可积极向有关部门举报反映。",
          "link": "https://www.theblockbeats.info/news/31683",
          "publishedOn": "2022-08-24T04:00:49.000Z",
          "wordCount": null,
          "title": "美SEC主席刊文：加密监管将让投资者与市场共同获益",
          "imageUrl": null
        },
        {
          "id": "https://www.theblockbeats.info/news/31682",
          "author": null,
          "description": "撰文：傅卓蕊\n\n\n也许谁也没有想到，几周前隐私交易应用 Tornado Cash 被 OFAC 制裁能引发如此规模的连锁反应，从 DeFi 应用的前端屏蔽地址，到开发者被抓，再到影响以太坊这条全球最大去中心化生态网络的抗审查性，事情的严重性已经远超预想。\n\n\n\n\n也许大家会有疑问，加密货币并不是第一次遇到监管，但为什么这次监管甚至影响到了网络的根基？这场制裁的不同点是什么？\n\n\n\n\n何为 OFAC？\n\n\n成立于 1950 年，外国资产控制办公室（the Office of Foreign Assets Control，简称 OFAC）是美国财政部下属的一个机构，主要对反对美国利益的外国人和组织进行经济或者贸易制裁，权力很大，名声相对较小，制裁效果明显，往往上了 OFAC 名单会给被制裁的目标带来深远的影响。\n\n\n \nOFAC 的创立来源于国会于 1977 年通过的一项法案——《国际紧急经济权力法》（简称 IEEPA），该法案首先要遵守美国宪法，所以行使法案相关权力的行为也要符合美国宪法。IEEPA 给予总统（国家行政机构）宣布国家紧急状态的权力，从而阻止受美国管辖的人和组织进行任何涉及外国势力损害美国利益的活动。IEEPA 给予了 OFAC 封锁财产的权力，其核心是「财产」。911 之后，为了从财务上更好地打击恐怖组织，当时的美国总统布什推进国会通过了另一项法案《美国爱国者法案》，实质上将 IEEPA 拟定的行政权扩大了，并给予了 OFAC 很大的权力。该法案允许 OFAC 封锁「调查中（pendency of an investigation）」的财产，并不必为此提出解释或提供确凿的证据。\n\n\n \n在 OFAC 开始将制裁的大棒挥向加密货币和区块链行业之前，OFAC 的传统制裁对象一般是意识形态上挑战美国的与主权国家相关的个人与组织。2021 年 10 月，OFAC 发布…",
          "link": "https://www.theblockbeats.info/news/31682",
          "publishedOn": "2022-08-24T03:00:49.000Z",
          "wordCount": null,
          "title": "进击的虚拟货币监管和摩擦",
          "imageUrl": null
        },
        {
          "id": "https://www.theblockbeats.info/news/31680",
          "author": null,
          "description": "原文标题：《\n\nSolidity 极简入门: 22. Call\n\n》\n原文作者：0xAA     \n\n\n我最近在重新学 solidity，巩固一下细节，也写一个「Solidity 极简入门」，供小白们使用（编程大佬可以另找教程），每周更新 1-3 讲。\n\n\n所有代码和教程开源在 github： github.com/AmazingAng/WTFSolidity\n\n\n我们曾在第 17 讲：发送 ETH那一讲介绍过利用 call 来发送 ETH，这一讲我们将介绍如何利用它调用合约。\n\n\nCall\n\n\ncall 是 address 类型的低级成员函数，它用来与其他合约交互。它的返回值为 (bool, data)，分别对应 call 是否成功以及目标函数的返回值。\n\n\ncall 是 solidity 官方推荐的通过触发 fallback 或 receive 函数发送 ETH 的方法。不推荐用 call 来调用另一个合约，因为当你调用不安全合约的函数时，你就把主动权交给了它。推荐的方法仍是声明合约变量后调用函数，见第 19 讲：调用其他合约。当我们不知道对方合约的源代码或 ABI，就没法生成合约变量；这时，我们仍可以通过 call 调用对方合约的函数。\n\n\ncall 的使用规则\n\n\ncall 的使用规则如下：\n\n\n\n\n\n其中二进制编码利用结构化编码函数 abi.encodeWithSignature 获得：\n\n\n\n\n\n函数签名为\"函数名（逗号分隔的参数类型)\"。例如 abi.encodeWithSignature(\"f(uint256,address)\", _x, _addr)。\n\n\n另外 call 在调用合约时可以指定交易发送的 ETH 数额和 gas：\n\n\n\n\n\n看起来有点复杂，下面我们举个 call 应用的例子。\n\n\n目标合约\n\n\n我们先写一个简单的目标合约 OtherContract 并部署，代码与第 19 讲中基本相同，只是多了 fallback 函数。\n\n\n\n\n\n这个合约包含一个状态变量 x，一个事件 Log 在收到 ETH 时触发，三个函数：\n\n\ngetBalance(): 返回合约 ETH 余额。setX(): external payable 函数，可以设置 x 的值，并向合约发送 ETH。getX(): 读取 x 的值。\n\n\n利用 call 调用目标合约\n\n\n1. Response 事件\n\n\n我们写一个 Call 合约来调用目标合约函数。首先先写一个定义 Response 事件，输出 call 返回的 success 和 data，方便我们观察返回值。\n\n\n\n\n\n2. 调用 setX 函数\n\n\n我们定义 callSetX 函数来调用目标合约的 setX()，转入 msg.value 数额的 ETH，并释放 Response 事件输出 success 和 data：\n\n\n\n\n\n接下来我们调用 callSetX 把状态变量_x 改为 5，参数为 OtherContract 地址和 5，由于目标函数 setX() 没有返回值，因此 Response 事件输出的 data 为 0x，也就是空。\n\n\n3. 调用 getX 函数\n\n\n下面我们调用 getX() 函数，它将返回目标合约_x 的值，类型为 uint256。我们可以利用 abi.decode 来解码 call 的返回值 data，并读出数值。\n\n\n\n\n\n从 Response 事件的输出，我们可以看到 data 为 0x0000000000000000000000000000000000000000000000000000000000000005。而经过 abi.decode，最终返回值为 5。\n\n\n4. 调用不存在的函数\n\n\n如果我们给 call 输入的函数不存在于目标合约，那么目标合约的 fallback 函数会被触发。\n\n\n\n\n\n上面例子中，我们 call 了不存在的 foo 函数。call 仍能执行成功，并返回 success，但其实调用的目标合约 fallback 函数。\n\n\n总结\n\n\n这一讲，我们介绍了如何用 call 这一低级函数来调用其他合约。call 不是调用合约的推荐方法，因为不安全。但他能让我们在不知道源代码和 ABI 的情况下调用目标合约，很有用。\n\n\n原文链接\n\n律动 BlockBeats 提醒，根据银保监会等五部门于 2018 年 8 月发布《关于防范以「虚拟货币」「区块链」名义进行非法集资的风险提示》的文件，请广大公众理性看待区块链，不要盲目相信天花乱坠的承诺，树立正确的货币观念和投资理念，切实提高风险意识；对发现的违法犯罪线索，可积极向有关部门举报反映。",
          "link": "https://www.theblockbeats.info/news/31680",
          "publishedOn": "2022-08-24T02:00:49.000Z",
          "wordCount": null,
          "title": "Solidity极简入门｜第二十二讲：Call",
          "imageUrl": null
        }
      ]
    },
    {
      "title": "Release notes from osmosfeed",
      "feedUrl": "https://github.com/osmoscraft/osmosfeed/releases.atom",
      "siteUrl": "https://github.com/osmoscraft/osmosfeed/releases",
      "articles": []
    }
  ],
  "cliVersion": "1.15.1"
}